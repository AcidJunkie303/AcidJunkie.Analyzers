# AJ0002 - Always specify the tracking type when using Entity Framework

## Explanation

Omitting `AsNoTracking` when doing read-only query in Entity Framework can lead to performance issues. This analyzer
makes sure that you
always specify the tracking type. Those are:

- `AsNoTracking`
- `AsTracking`

However, there's one exception to that rule that is:

- When a `Select` statement returns a non-entity type (e.g. `Select(a => a.Name)`) and the returned object itself
  doesn't contain an Entity Framework entity.

## Code example

````csharp
var ctx = new TestContext();
ctx.TestEntities.Where(x => x.Id == 1); // Warning -> No tracking type was specified
ctx.TestEntities.AsNoTracking().Where(x => x.Id == 1); // OK -> AsNoTracking was called
ctx.TestEntities.AsTracking().Where(x => x.Id == 1); // OK -> AsTracking was called
ctx.TestEntities.Where(x => x.Id == 1).Select(a => a.Name); // OK -> The query returns a non-entity type
ctx.TestEntities.Where(x => x.Id == 1).Select(a => new { Name = a.Name }); // OK -> The result of the Select statement doesn't return an entity.
ctx.TestEntities.Where(x => x.Id == 1).Select(a => new { Name = a.Name, Entity = a }); // Warning -> The query returns a non-entity type but it contains an entity (Entity property)
````

## Configuration

| Configuration Key (.editorconfig) | Description                                                                                                                                                                                                                                                  |
|:----------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `AJ0002.is_enabled`               | Enables or disables the analyzer. Default is `true`.                                                                                                                                                                                                         |
| `AJ0002.mode`                     | Can have two values: `Strict` or `Relaxed`. Default is `Strict`. <ul><li>`Strict` enforces this rule all the time.</li><li>`Relaxed` enforces the rule only if the return type contains any types that are entities of the underlying `DbContext`.</li></ul> |
